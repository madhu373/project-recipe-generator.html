<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sweet Recipe Finder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: linear-gradient(135deg, #ffb6c1 0%, #ffc0cb 25%, #ffe4e1 50%, #f0e68c 75%, #98fb98 100%);
            --bg-secondary: #fff0f5;
            --text-primary: #8b4513;
            --text-secondary: #cd5c5c;
            --accent: #ff69b4;
            --card-bg: rgba(255, 255, 255, 0.9);
            --button-primary: linear-gradient(45deg, #ff69b4, #ffc0cb);
            --button-hover: linear-gradient(45deg, #ff1493, #ff69b4);
            --border-radius: 20px;
            --shadow: 0 8px 32px rgba(255, 105, 180, 0.3);
        }

        /* Minecraft Theme */
        [data-theme="minecraft"] {
            --bg-primary: linear-gradient(135deg, #228b22 0%, #32cd32 25%, #90ee90 50%, #8b4513 75%, #a0522d 100%);
            --bg-secondary: #2f4f2f;
            --text-primary: #ffffff;
            --text-secondary: #ffff00;
            --accent: #00ff00;
            --card-bg: rgba(139, 69, 19, 0.9);
            --button-primary: linear-gradient(45deg, #00ff00, #32cd32);
            --button-hover: linear-gradient(45deg, #228b22, #00ff00);
            --border-radius: 0px;
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.8);
        }

        /* Ocean Theme */
        [data-theme="ocean"] {
            --bg-primary: linear-gradient(135deg, #87ceeb 0%, #4682b4 25%, #5f9ea0 50%, #008b8b 75%, #20b2aa 100%);
            --bg-secondary: #f0f8ff;
            --text-primary: #003366;
            --text-secondary: #006666;
            --accent: #00ced1;
            --card-bg: rgba(240, 248, 255, 0.9);
            --button-primary: linear-gradient(45deg, #00ced1, #87ceeb);
            --button-hover: linear-gradient(45deg, #008b8b, #00ced1);
            --border-radius: 15px;
            --shadow: 0 8px 32px rgba(0, 206, 209, 0.3);
        }

        /* Galaxy Theme */
        [data-theme="galaxy"] {
            --bg-primary: linear-gradient(135deg, #191970 0%, #4b0082 25%, #8a2be2 50%, #9400d3 75%, #000000 100%);
            --bg-secondary: #1a1a2e;
            --text-primary: #ffffff;
            --text-secondary: #ff6ec7;
            --accent: #00ffff;
            --card-bg: rgba(26, 26, 46, 0.9);
            --button-primary: linear-gradient(45deg, #00ffff, #ff6ec7);
            --button-hover: linear-gradient(45deg, #8a2be2, #00ffff);
            --border-radius: 25px;
            --shadow: 0 8px 32px rgba(0, 255, 255, 0.3);
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: var(--bg-primary);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* Floating Animation */
        .floating-food {
            position: fixed;
            font-size: 2rem;
            animation: float 6s ease-in-out infinite;
            pointer-events: none;
            z-index: 1;
        }

        .floating-food.main-page {
            z-index: -1;
            opacity: 0.3;
            font-size: 3rem;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(5deg); }
            66% { transform: translateY(10px) rotate(-3deg); }
        }

        /* Login Page */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .login-card {
            background: var(--card-bg);
            padding: 40px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .logo {
            font-size: 3rem;
            margin-bottom: 10px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--text-secondary);
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--accent);
            border-radius: var(--border-radius);
            font-size: 16px;
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .btn {
            background: var(--button-primary);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn:hover {
            background: var(--button-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(255, 105, 180, 0.4);
        }

        /* Main App */
        .app-container {
            display: none;
            padding: 20px;
        }

        .header {
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .ingredients-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .category-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
        }

        .category-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ingredient-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: var(--bg-secondary);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .ingredient-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 105, 180, 0.2);
        }

        .ingredient-item input[type="checkbox"] {
            margin-right: 15px;
            transform: scale(1.2);
        }

        .recipe-section {
            background: var(--card-bg);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            margin-top: 30px;
        }

        .recipe {
            margin-bottom: 30px;
            padding: 20px;
            background: var(--bg-secondary);
            border-radius: 15px;
            border-left: 5px solid var(--accent);
        }

        .recipe h3 {
            color: var(--text-secondary);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .recipe-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .detail-section h4 {
            color: var(--accent);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .step {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-left: 4px solid var(--accent);
        }

        /* Admin Panel */
        .admin-panel {
            display: none;
            background: var(--card-bg);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-top: 20px;
        }

        .admin-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        /* Settings Panel */
        .settings-panel {
            display: none;
            background: var(--card-bg);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            margin-top: 20px;
        }

        .theme-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .theme-option {
            padding: 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            border: 2px solid transparent;
        }

        .theme-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }

        .theme-option.active {
            border-color: var(--accent);
        }

        .strawberry { background: linear-gradient(45deg, #ffb6c1, #ffc0cb); }
        .minecraft { background: linear-gradient(45deg, #228b22, #8b4513); color: white; }
        .ocean { background: linear-gradient(45deg, #87ceeb, #4682b4); color: white; }
        .galaxy { background: linear-gradient(45deg, #191970, #8a2be2); color: white; }

        .hidden { display: none !important; }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-buttons {
                justify-content: center;
            }
            
            .ingredients-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body data-theme="strawberry">
    <!-- Floating Food Animation -->
    <div class="floating-food" style="top: 10%; left: 10%; animation-delay: 0s;">üçì</div>
    <div class="floating-food" style="top: 20%; right: 15%; animation-delay: 1s;">üßÅ</div>
    <div class="floating-food" style="top: 60%; left: 5%; animation-delay: 2s;">üç∞</div>
    <div class="floating-food" style="top: 80%; right: 10%; animation-delay: 3s;">üç™</div>
    <div class="floating-food" style="top: 40%; left: 80%; animation-delay: 4s;">ü•õ</div>
    <div class="floating-food" style="top: 70%; left: 70%; animation-delay: 5s;">ü•ö</div>

    <!-- Login Page -->
    <div id="loginPage" class="login-container">
        <div class="login-card">
            <div class="logo">üçì‚ú®</div>
            <h1 style="color: var(--text-secondary); margin-bottom: 30px;">Sweet Recipe Finder</h1>
            
            <div id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email:</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password:</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button class="btn" onclick="login()">Login üç∞</button>
                <button class="btn" onclick="showSignup()">Sign Up üßÅ</button>
            </div>

            <div id="signupForm" class="hidden">
                <div class="form-group">
                    <label for="signupName">Name:</label>
                    <input type="text" id="signupName" required>
                </div>
                <div class="form-group">
                    <label for="signupEmail">Email:</label>
                    <input type="email" id="signupEmail" required>
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password:</label>
                    <input type="password" id="signupPassword" required>
                </div>
                <button class="btn" onclick="signup()">Create Account üçì</button>
                <button class="btn" onclick="showLogin()">Back to Login üîô</button>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="app-container">
        <div class="header">
            <h1>üçì Sweet Recipe Finder ‚ú®</h1>
            <div class="nav-buttons">
                <button class="btn" onclick="showIngredients()">Ingredients ü•ò</button>
                <button class="btn" onclick="showAdmin()">Admin Panel üëë</button>
                <button class="btn" onclick="showSettings()">Settings ‚öôÔ∏è</button>
                <button class="btn" onclick="logout()">Logout üëã</button>
            </div>
        </div>

        <!-- Ingredients Section -->
        <div id="ingredientsSection">
            <div class="ingredients-container" id="ingredientsContainer">
                <!-- Categories will be dynamically generated -->
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
                <button class="btn" onclick="generateRecipes()" style="font-size: 1.2rem; padding: 20px 40px;">
                    Create Magic Recipes! ‚ú®üç∞
                </button>
            </div>

            <div id="recipesSection" class="recipe-section hidden">
                <h2 style="text-align: center; margin-bottom: 30px; color: var(--text-secondary);">
                    Your Magical Recipes! üåü
                </h2>
                <div id="recipesContainer"></div>
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="adminPanel" class="admin-panel">
            <h2 style="color: var(--text-secondary); margin-bottom: 20px;">Admin Panel üëë</h2>
            <div class="admin-form">
                <div class="form-group">
                    <label for="newCategory">Category:</label>
                    <input type="text" id="newCategory" placeholder="e.g., Dairy">
                </div>
                <div class="form-group">
                    <label for="newIngredient">Ingredient:</label>
                    <input type="text" id="newIngredient" placeholder="e.g., Milk">
                </div>
                <div class="form-group">
                    <label for="ingredientEmoji">Emoji:</label>
                    <input type="text" id="ingredientEmoji" placeholder="ü•õ">
                </div>
            </div>
            <button class="btn" onclick="addIngredient()">Add Ingredient ‚ûï</button>
            
            <h3 style="margin-top: 30px; color: var(--text-secondary);">Current Ingredients:</h3>
            <div id="adminIngredientsList" style="margin-top: 15px;"></div>
        </div>

        <!-- Settings Panel -->
        <div id="settingsPanel" class="settings-panel">
            <h2 style="color: var(--text-secondary); margin-bottom: 20px;">Settings ‚öôÔ∏è</h2>
            <h3 style="color: var(--accent); margin-bottom: 15px;">Choose Your Theme:</h3>
            <div class="theme-selector">
                <div class="theme-option strawberry active" onclick="changeTheme('strawberry')">
                    <h4>üçì Strawberry Shortcake</h4>
                    <p>Sweet & Pink</p>
                </div>
                <div class="theme-option minecraft" onclick="changeTheme('minecraft')">
                    <h4>‚õèÔ∏è Minecraft</h4>
                    <p>Blocky & Green</p>
                </div>
                <div class="theme-option ocean" onclick="changeTheme('ocean')">
                    <h4>üåä Ocean Breeze</h4>
                    <p>Cool & Blue</p>
                </div>
                <div class="theme-option galaxy" onclick="changeTheme('galaxy')">
                    <h4>üåå Galaxy</h4>
                    <p>Dark & Mysterious</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data Storage
        let users = [
            { email: 'admin@sweetrecipes.com', password: 'admin123', name: 'Admin', isAdmin: true }
        ];
        let currentUser = null;
        
        let ingredients = {
            'Dairy': [
                { name: 'Milk', emoji: 'ü•õ' },
                { name: 'Eggs', emoji: 'ü•ö' },
                { name: 'Butter', emoji: 'üßà' },
                { name: 'Cheese', emoji: 'üßÄ' },
                { name: 'Yogurt', emoji: 'ü•£' },
                { name: 'Cream', emoji: 'ü•õ' }
            ],
            'Fruits': [
                { name: 'Strawberries', emoji: 'üçì' },
                { name: 'Bananas', emoji: 'üçå' },
                { name: 'Apples', emoji: 'üçé' },
                { name: 'Blueberries', emoji: 'ü´ê' },
                { name: 'Oranges', emoji: 'üçä' },
                { name: 'Lemons', emoji: 'üçã' }
            ],
            'Pantry': [
                { name: 'Flour', emoji: 'üåæ' },
                { name: 'Sugar', emoji: 'üçØ' },
                { name: 'Salt', emoji: 'üßÇ' },
                { name: 'Vanilla', emoji: 'üåø' },
                { name: 'Baking Powder', emoji: 'ü•Ñ' },
                { name: 'Cocoa Powder', emoji: 'üç´' }
            ],
            'Proteins': [
                { name: 'Chicken', emoji: 'üêî' },
                { name: 'Fish', emoji: 'üêü' },
                { name: 'Beef', emoji: 'ü•©' },
                { name: 'Tofu', emoji: 'üßÜ' },
                { name: 'Beans', emoji: 'ü´ò' },
                { name: 'Nuts', emoji: 'ü•ú' }
            ]
        };

        let recipes = {
            'Strawberry Pancakes': {
                ingredients: ['Flour', 'Milk', 'Eggs', 'Strawberries', 'Sugar'],
                description: 'Fluffy pancakes topped with fresh strawberries!',
                servings: 4,
                cookTime: '20 minutes',
                difficulty: 'Easy',
                steps: [
                    'Mix 2 cups flour, 2 tbsp sugar, 2 tsp baking powder, and 1/2 tsp salt in a large bowl.',
                    'In another bowl, whisk together 1 3/4 cups milk, 2 eggs, and 2 tbsp melted butter.',
                    'Pour wet ingredients into dry ingredients and stir until just combined (don\'t overmix!).',
                    'Heat a lightly greased pan over medium heat.',
                    'Pour 1/4 cup batter for each pancake and cook until bubbles form on surface.',
                    'Flip and cook until golden brown on the other side.',
                    'Serve hot topped with sliced strawberries and maple syrup!'
                ],
                tips: [
                    'Don\'t overmix the batter - lumps are okay!',
                    'Let the batter rest for 5 minutes for fluffier pancakes',
                    'Keep cooked pancakes warm in a 200¬∞F oven'
                ]
            },
            'Banana Smoothie': {
                ingredients: ['Bananas', 'Milk', 'Yogurt', 'Vanilla'],
                description: 'Creamy and delicious banana smoothie!',
                servings: 2,
                cookTime: '5 minutes',
                difficulty: 'Easy',
                steps: [
                    'Peel and slice 2 ripe bananas.',
                    'Add bananas to blender with 1 cup milk, 1/2 cup yogurt, and 1 tsp vanilla.',
                    'Blend on high speed for 60-90 seconds until smooth and creamy.',
                    'Taste and add honey if you prefer it sweeter.',
                    'Pour into glasses and serve immediately.',
                    'Optional: garnish with a banana slice and a sprinkle of cinnamon!'
                ],
                tips: [
                    'Use frozen bananas for a thicker smoothie',
                    'Add ice cubes for extra coldness',
                    'Try adding a tablespoon of peanut butter for extra flavor'
                ]
            },
            'Chocolate Chip Cookies': {
                ingredients: ['Flour', 'Butter', 'Sugar', 'Eggs', 'Vanilla', 'Cocoa Powder'],
                description: 'Classic chewy chocolate chip cookies!',
                servings: 24,
                cookTime: '25 minutes',
                difficulty: 'Medium',
                steps: [
                    'Preheat oven to 375¬∞F (190¬∞C).',
                    'Cream together 1 cup softened butter with 3/4 cup white sugar and 3/4 cup brown sugar.',
                    'Beat in 2 eggs one at a time, then add 2 tsp vanilla extract.',
                    'In separate bowl, whisk 2 1/4 cups flour, 1 tsp baking soda, and 1 tsp salt.',
                    'Gradually mix dry ingredients into wet ingredients.',
                    'Fold in 2 cups chocolate chips.',
                    'Drop rounded tablespoons of dough onto ungreased baking sheets.',
                    'Bake for 9-11 minutes until golden brown.',
                    'Cool on baking sheet for 5 minutes before transferring to wire rack.'
                ],
                tips: [
                    'Don\'t overbake - cookies continue cooking on hot pan',
                    'Chill dough for 30 minutes for thicker cookies',
                    'Use room temperature ingredients for best mixing'
                ]
            },
            'Apple Cinnamon Oatmeal': {
                ingredients: ['Apples', 'Milk', 'Sugar', 'Salt'],
                description: 'Warm and comforting breakfast oatmeal!',
                servings: 2,
                cookTime: '15 minutes',
                difficulty: 'Easy',
                steps: [
                    'Dice 1 large apple into small pieces.',
                    'In a saucepan, bring 2 cups milk to a gentle simmer.',
                    'Add 1 cup old-fashioned oats and diced apples.',
                    'Stir in 2 tbsp brown sugar, 1 tsp cinnamon, and pinch of salt.',
                    'Simmer for 10-12 minutes, stirring occasionally.',
                    'Remove from heat and let stand for 2 minutes to thicken.',
                    'Serve hot with additional cinnamon and honey if desired!'
                ],
                tips: [
                    'Use old-fashioned oats for better texture',
                    'Add nuts or raisins for extra flavor',
                    'Make overnight oats version for busy mornings'
                ]
            }
        };

        // Authentication Functions
        function showSignup() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('signupForm').classList.remove('hidden');
        }

        function showLogin() {
            document.getElementById('signupForm').classList.add('hidden');
            document.getElementById('loginForm').classList.remove('hidden');
        }

        function signup() {
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;

            if (!name || !email || !password) {
                alert('Please fill in all fields! üå∏');
                return;
            }

            if (users.find(user => user.email === email)) {
                alert('Email already exists! Please use a different email. üíï');
                return;
            }

            users.push({ email, password, name, isAdmin: false });
            alert('Account created successfully! Welcome to Sweet Recipe Finder! üéâ');
            showLogin();
        }

        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
                renderIngredients();
                updateFloatingAnimation();
            } else {
                alert('Invalid credentials! Please try again. üçì');
            }
        }

        function logout() {
            currentUser = null;
            document.getElementById('mainApp').style.display = 'none';
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
        }

        // Navigation Functions
        function showIngredients() {
            document.getElementById('ingredientsSection').style.display = 'block';
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('settingsPanel').style.display = 'none';
        }

        function showAdmin() {
            if (!currentUser.isAdmin) {
                alert('Access denied! Admin privileges required. üëë');
                return;
            }
            document.getElementById('ingredientsSection').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            document.getElementById('settingsPanel').style.display = 'none';
            renderAdminIngredients();
        }

        function showSettings() {
            document.getElementById('ingredientsSection').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('settingsPanel').style.display = 'block';
        }

        // Ingredient Management
        function renderIngredients() {
            const container = document.getElementById('ingredientsContainer');
            container.innerHTML = '';

            Object.keys(ingredients).forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'category-card';
                
                const categoryIcon = getCategoryIcon(category);
                categoryDiv.innerHTML = `
                    <h3 class="category-title">${categoryIcon} ${category}</h3>
                    ${ingredients[category].map(ingredient => `
                        <div class="ingredient-item">
                            <input type="checkbox" id="ingredient-${ingredient.name}" value="${ingredient.name}">
                            <label for="ingredient-${ingredient.name}">
                                ${ingredient.emoji} ${ingredient.name}
                            </label>
                        </div>
                    `).join('')}
                `;
                
                container.appendChild(categoryDiv);
            });
        }

        function getCategoryIcon(category) {
            const icons = {
                'Dairy': 'ü•õ',
                'Fruits': 'üçì',
                'Pantry': 'üè∫',
                'Proteins': 'üçñ',
                'Vegetables': 'ü•ï',
                'Spices': 'üå∂Ô∏è'
            };
            return icons[category] || 'üçΩÔ∏è';
        }

        function addIngredient() {
            if (!currentUser.isAdmin) return;

            const category = document.getElementById('newCategory').value.trim();
            const ingredientName = document.getElementById('newIngredient').value.trim();
            const emoji = document.getElementById('ingredientEmoji').value.trim();

            if (!category || !ingredientName || !emoji) {
                alert('Please fill in all fields! üå∏');
                return;
            }

            if (!ingredients[category]) {
                ingredients[category] = [];
            }

            ingredients[category].push({ name: ingredientName, emoji: emoji });
            
            // Clear form
            document.getElementById('newCategory').value = '';
            document.getElementById('newIngredient').value = '';
            document.getElementById('ingredientEmoji').value = '';
            
            alert(`Added ${ingredientName} to ${category}! üéâ`);
            renderIngredients();
            renderAdminIngredients();
        }

        function renderAdminIngredients() {
            const container = document.getElementById('adminIngredientsList');
            container.innerHTML = '';

            Object.keys(ingredients).forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.style.marginBottom = '20px';
                categoryDiv.innerHTML = `
                    <h4 style="color: var(--text-secondary); margin-bottom: 10px;">${getCategoryIcon(category)} ${category}</h4>
                    ${ingredients[category].map(ingredient => `
                        <div style="display: flex; align-items: center; padding: 8px; background: var(--bg-secondary); margin: 5px 0; border-radius: 8px;">
                            <span>${ingredient.emoji} ${ingredient.name}</span>
                            <button onclick="removeIngredient('${category}', '${ingredient.name}')" style="margin-left: auto; background: #ff4757; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">Remove</button>
                        </div>
                    `).join('')}
                `;
                container.appendChild(categoryDiv);
            });
        }

        function removeIngredient(category, ingredientName) {
            if (!currentUser.isAdmin) return;
            
            ingredients[category] = ingredients[category].filter(ing => ing.name !== ingredientName);
            
            if (ingredients[category].length === 0) {
                delete ingredients[category];
            }
            
            renderIngredients();
            renderAdminIngredients();
            alert(`Removed ${ingredientName} from ${category}! üóëÔ∏è`);
        }

        // Recipe Generation
        function generateRecipes() {
            const selectedIngredients = [];
            const checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
            
            checkboxes.forEach(checkbox => {
                selectedIngredients.push(checkbox.value);
            });

            if (selectedIngredients.length === 0) {
                alert('Please select some ingredients first! ü•∫');
                return;
            }

            const matchingRecipes = [];
            
            Object.keys(recipes).forEach(recipeName => {
                const recipe = recipes[recipeName];
                const matchingIngredients = recipe.ingredients.filter(ingredient => 
                    selectedIngredients.includes(ingredient)
                );
                
                if (matchingIngredients.length >= 2) {
                    matchingRecipes.push({
                        name: recipeName,
                        ...recipe,
                        matchCount: matchingIngredients.length,
                        matchingIngredients: matchingIngredients
                    });
                }
            });

            // Sort by match count
            matchingRecipes.sort((a, b) => b.matchCount - a.matchCount);

            displayRecipes(matchingRecipes, selectedIngredients);
        }

        function displayRecipes(matchingRecipes, selectedIngredients) {
            const recipesSection = document.getElementById('recipesSection');
            const recipesContainer = document.getElementById('recipesContainer');
            
            recipesSection.classList.remove('hidden');
            recipesContainer.innerHTML = '';

            if (matchingRecipes.length === 0) {
                recipesContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                        <h3>No recipes found! ü•∫</h3>
                        <p>Try selecting different ingredients or adding more to your pantry!</p>
                        <div style="font-size: 2rem; margin: 20px;">üç¥‚ú®</div>
                    </div>
                `;
                return;
            }

            matchingRecipes.forEach(recipe => {
                const recipeDiv = document.createElement('div');
                recipeDiv.className = 'recipe';
                
                const missingIngredients = recipe.ingredients.filter(ing => 
                    !selectedIngredients.includes(ing)
                );

                recipeDiv.innerHTML = `
                    <h3>${recipe.name} ${getRecipeEmoji(recipe.name)}</h3>
                    <p style="font-size: 1.1rem; margin-bottom: 15px; color: var(--text-secondary);">
                        ${recipe.description}
                    </p>
                    
                    <div class="recipe-details">
                        <div class="detail-section">
                            <h4>üìä Recipe Info</h4>
                            <p><strong>Servings:</strong> ${recipe.servings}</p>
                            <p><strong>Cook Time:</strong> ${recipe.cookTime}</p>
                            <p><strong>Difficulty:</strong> ${recipe.difficulty}</p>
                            <p><strong>Match:</strong> ${recipe.matchCount}/${recipe.ingredients.length} ingredients</p>
                        </div>
                        
                        <div class="detail-section">
                            <h4>‚úÖ You Have</h4>
                            ${recipe.matchingIngredients.map(ing => `
                                <span style="background: #90EE90; padding: 4px 8px; margin: 2px; border-radius: 8px; display: inline-block;">
                                    ${getIngredientEmoji(ing)} ${ing}
                                </span>
                            `).join('')}
                        </div>
                        
                        ${missingIngredients.length > 0 ? `
                        <div class="detail-section">
                            <h4>üõí You Need</h4>
                            ${missingIngredients.map(ing => `
                                <span style="background: #FFB6C1; padding: 4px 8px; margin: 2px; border-radius: 8px; display: inline-block;">
                                    ${getIngredientEmoji(ing)} ${ing}
                                </span>
                            `).join('')}
                        </div>
                        ` : ''}
                    </div>
                    
                    <div class="detail-section" style="margin-top: 20px;">
                        <h4>üë©‚Äçüç≥ Detailed Instructions</h4>
                        ${recipe.steps.map((step, index) => `
                            <div class="step">
                                <strong>Step ${index + 1}:</strong> ${step}
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="detail-section" style="margin-top: 20px;">
                        <h4>üí° Pro Tips</h4>
                        ${recipe.tips.map(tip => `
                            <div style="background: #FFFACD; padding: 12px; margin: 8px 0; border-radius: 8px; border-left: 4px solid #FFD700;">
                                üí° ${tip}
                            </div>
                        `).join('')}
                    </div>
                `;
                
                recipesContainer.appendChild(recipeDiv);
            });

            // Scroll to recipes
            recipesSection.scrollIntoView({ behavior: 'smooth' });
        }

        function getRecipeEmoji(recipeName) {
            const emojis = {
                'Strawberry Pancakes': 'ü•û',
                'Banana Smoothie': 'ü•§',
                'Chocolate Chip Cookies': 'üç™',
                'Apple Cinnamon Oatmeal': 'ü•£'
            };
            return emojis[recipeName] || 'üçΩÔ∏è';
        }

        function getIngredientEmoji(ingredientName) {
            for (let category of Object.values(ingredients)) {
                const ingredient = category.find(ing => ing.name === ingredientName);
                if (ingredient) return ingredient.emoji;
            }
            return 'ü•Ñ';
        }

        // Theme Management
        function changeTheme(theme) {
            document.body.setAttribute('data-theme', theme);
            
            // Update active theme
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            document.querySelector(`.theme-option.${theme}`).classList.add('active');
            
            updateFloatingAnimation();
            
            // Show theme change confirmation
            showThemeNotification(theme);
        }

        function showThemeNotification(theme) {
            const notifications = {
                'strawberry': 'Sweet strawberry theme activated! üçì‚ú®',
                'minecraft': 'Minecraft theme activated! ‚õèÔ∏èüü´',
                'ocean': 'Ocean theme activated! üåäüíô',
                'galaxy': 'Galaxy theme activated! üåå‚ú®'
            };
            
            // Create notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--card-bg);
                color: var(--text-primary);
                padding: 15px 25px;
                border-radius: var(--border-radius);
                box-shadow: var(--shadow);
                z-index: 1000;
                animation: slideIn 0.5s ease;
            `;
            notification.textContent = notifications[theme];
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function updateFloatingAnimation() {
            const floatingFoods = document.querySelectorAll('.floating-food');
            const currentTheme = document.body.getAttribute('data-theme');
            
            const themeEmojis = {
                'strawberry': ['üçì', 'üßÅ', 'üç∞', 'üç™', 'ü•õ', 'ü•ö'],
                'minecraft': ['üü´', '‚õèÔ∏è', 'üå±', 'üçñ', 'üß±', 'üíé'],
                'ocean': ['üê†', 'üåä', 'üêô', 'ü¶à', 'üêö', 'ü¶Ä'],
                'galaxy': ['‚≠ê', 'üåü', 'üåô', 'ü™ê', 'üöÄ', 'üëΩ']
            };
            
            const emojis = themeEmojis[currentTheme] || themeEmojis['strawberry'];
            
            floatingFoods.forEach((food, index) => {
                food.textContent = emojis[index] || emojis[0];
            });
        }

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            renderIngredients();
            updateFloatingAnimation();
            
            // Add CSS animation for theme notification
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
            `;
            document.head.appendChild(style);
            
            // Move floating foods to background when in main app
            function moveFloatingFoodsToBackground() {
                const floatingFoods = document.querySelectorAll('.floating-food');
                floatingFoods.forEach(food => {
                    food.classList.add('main-page');
                });
            }
            
            // Override login function to handle floating foods
            const originalLogin = window.login;
            window.login = function() {
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;

                const user = users.find(u => u.email === email && u.password === password);
                
                if (user) {
                    currentUser = user;
                    document.getElementById('loginPage').style.display = 'none';
                    document.getElementById('mainApp').style.display = 'block';
                    renderIngredients();
                    updateFloatingAnimation();
                    moveFloatingFoodsToBackground();
                } else {
                    alert('Invalid credentials! Please try again. üçì');
                }
            };
            
            // Override logout function to handle floating foods
            const originalLogout = window.logout;
            window.logout = function() {
                currentUser = null;
                document.getElementById('mainApp').style.display = 'none';
                document.getElementById('loginPage').style.display = 'flex';
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                
                // Move floating foods back to foreground
                const floatingFoods = document.querySelectorAll('.floating-food');
                floatingFoods.forEach(food => {
                    food.classList.remove('main-page');
                });
            };
            
            // Add some sample recipes for better demonstration
            recipes['Fruit Salad'] = {
                ingredients: ['Strawberries', 'Bananas', 'Apples', 'Oranges'],
                description: 'Fresh and colorful fruit salad!',
                servings: 4,
                cookTime: '10 minutes',
                difficulty: 'Easy',
                steps: [
                    'Wash all fruits thoroughly under cold water.',
                    'Hull and slice strawberries into bite-sized pieces.',
                    'Peel and slice bananas into rounds.',
                    'Core and dice apples into small cubes.',
                    'Peel oranges and separate into segments.',
                    'Combine all fruits in a large bowl.',
                    'Toss gently to mix and serve immediately.',
                    'Optional: drizzle with honey or add mint leaves for extra flavor!'
                ],
                tips: [
                    'Add lemon juice to prevent apples from browning',
                    'Chill for 30 minutes before serving for best taste',
                    'Add nuts or yogurt for extra protein'
                ]
            };

            recipes['Cheese Omelet'] = {
                ingredients: ['Eggs', 'Cheese', 'Butter', 'Salt'],
                description: 'Fluffy cheese omelet perfect for breakfast!',
                servings: 1,
                cookTime: '8 minutes',
                difficulty: 'Medium',
                steps: [
                    'Crack 3 eggs into a bowl and whisk until well combined.',
                    'Add a pinch of salt and pepper to the eggs.',
                    'Heat 1 tablespoon butter in a non-stick pan over medium-low heat.',
                    'Pour eggs into the pan and let them set for 30 seconds.',
                    'Using a spatula, gently push cooked edges toward center.',
                    'Tilt pan to let uncooked egg flow underneath.',
                    'When eggs are almost set, add grated cheese to one half.',
                    'Fold omelet in half and slide onto plate.',
                    'Serve immediately while hot and fluffy!'
                ],
                tips: [
                    'Keep heat at medium-low to prevent burning',
                    'Don\'t overfill with cheese or it won\'t fold properly',
                    'Practice makes perfect with omelet folding!'
                ]
            };
        });
    </script>
</body>
</html>